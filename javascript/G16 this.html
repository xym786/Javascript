<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        /*
        1.函数预编译过程中 this → window
        2.全局作用域中 this → window
        3.call apply可改变函数this的指向
        4.obj.func() func()中的this指向obj
        5.箭头函数内没有自己的this 出现了this 会向外层作用域中查找
        */
        function test(c) {
            /*
            //作为构造函数调用时 以下语句生效
            var this = Object.create(test.prototype);
            var this = {
                __proto__: test.prototype
            }
            */
            var a = 123;
            function b() { }
        }
        test(1);
        /*
        AO {
            arguments: [1],
            c: 1,
            a: undefined,
            b: function() {}
            this: window
        }
        */

        new test();
        /*
        AO {
            arguments: [1],
            c: 1,
            a: undefined,
            b: function() {}
            this: {
                __proto__: test.prototype
            }
        }
        */

        // var name = '222';
        // var a = {
        //     name: '111',
        //     say: function() {
        //         console.info(this.name);
        //     }
        // }
        // var fun = a.say;
        // fun(); //222
        // a.say(); //111
        // var b = {
        //     name: '333',
        //     say: function(fun) {
        //         fun();
        //     }
        // }
        // b.say(a.say); //222
        // b.say = a.say;
        // b.say(); //333


        // var bar = {
        //     a: '002'
        // }
        // function print() {
        //     bar.a = 'a';
        //     Object.prototype.b = 'b';
        //     return function inner() {
        //         console.log(bar.a); //a
        //         console.log(bar.b); //b
        //     }
        // }
        // print()();


        //arguments.callee 函数自身的引用  func.caller 函数运行环境 如果函数在全局对象中运行 则返回null
        // var num = (function(n) {
        //     if(n == 1) {
        //         return 1;
        //     }
        //     return n * arguments.callee(n - 1);
        // }(10));
        // console.log(num);

        // function demo() {
        //     console.log(demo.caller);
        // }
        // demo();


        // var foo = 123;
        // function print() {
        //     this.foo = 234;
        //     console.log(foo);
        // }
        // //print(); //234
        // new print(); //123
    </script>
</body>

</html>